<!-- 
Name: Ruby Bron
Studenid: 12474223
Data source: https://www.gbif.org/dataset/c3ef6404-277e-4b8b-93a0-588e9eab643a
Downloaded as source archive and used the occurence.txt as data-file

This file creates a bar-chart with a D3 library
-->

<!DOCTYPE html>
<html>
	<head>
  		<meta charset="utf-8">
    	<title>Soil fauna in Dunes, the Netherlands</title>
    	<script type="text/javascript" src="d3/d3.js"></script>

	</head>
	<body>
		<div class="header">
 			<h1>Soil fauna in Dunes, the Netherlands</h1>
  			<p>OMG it's a bar chart made by Ruby Bron (student number: 12474223)</p>
  			<p>This is a bar chart made with the D3 library for the course: Data processing. It is made using a dataset acquired from WUR. This dataset contains data about the number of soil insects in three dune area's in the West of the Netherlands.</p>
		</div>
  		<script type="text/javascript">


  			var fileName = "data.json";
			var txtFile = new XMLHttpRequest();
			txtFile.onreadystatechange = function() {
    			if (txtFile.readyState === 4 && txtFile.status == 200) {
        			var json = JSON.parse(txtFile.responseText);
        			bindData(json);
    			};
			};
			txtFile.open("GET", fileName);
			txtFile.send();	


			function bindData(file) {
				// binds the data to all p values
				d3.select("body").selectAll("p")
    			  .data(file)
    			  .enter()
    			  .append("p");

				createCircle(file);
			};

			//Width and height SVG
			var w = 100;
			var h = 100;
			var barPadding = 1;
			var datasetLenght = 5;

			// create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);


			function createCircle(file) {
				// creates bars with own data input
				var bars = svg.selectAll("rect")
	            			  .data(file)
	                 		  .enter()
	                 		  .append("rect");

	            bars.attr("y", function(d) {
    				return h - d.individualCount * 4;
    			})
		        	.attr("x", function(d, i) {
		           	return i * (w / datasetLenght);
		        })
		        	.attr("width", w / datasetLenght - barPadding)
		        	.attr("height", function(d) {
		        	return d.individualCount * 4;
		        });

			}
    	</script>
	</body>
</html>